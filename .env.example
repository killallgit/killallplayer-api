# Podcast Player API Environment Variables
# Copy this file to .env and fill in your values
# All environment variables use the KILLALL_ prefix

# Environment (development, staging, production)
KILLALL_ENVIRONMENT=development

# Server Configuration
KILLALL_SERVER_HOST=0.0.0.0
KILLALL_SERVER_PORT=8080
KILLALL_SERVER_READ_TIMEOUT=30s
KILLALL_SERVER_WRITE_TIMEOUT=30s
KILLALL_SERVER_SHUTDOWN_TIMEOUT=10s
KILLALL_SERVER_MAX_HEADER_BYTES=1048576


# Database Configuration
# Leave empty to run without database
KILLALL_DATABASE_PATH=./data/podcast.db
KILLALL_DATABASE_MAX_CONNECTIONS=10
KILLALL_DATABASE_MAX_IDLE_CONNECTIONS=5
KILLALL_DATABASE_CONNECTION_MAX_LIFETIME=30m
KILLALL_DATABASE_ENABLE_WAL=true
KILLALL_DATABASE_ENABLE_FOREIGN_KEYS=true
KILLALL_DATABASE_LOG_QUERIES=false
KILLALL_DATABASE_VERBOSE=false

# Processing Configuration
KILLALL_PROCESSING_WORKERS=2
KILLALL_PROCESSING_MAX_QUEUE_SIZE=100
KILLALL_PROCESSING_BATCH_SIZE=10
KILLALL_PROCESSING_TIMEOUT=5m
KILLALL_PROCESSING_RETRY_ATTEMPTS=3
KILLALL_PROCESSING_RETRY_DELAY=1s

# Podcast Index API
# Get your API credentials from https://podcastindex.org/api
# WARNING: Don't use placeholder values in production!
KILLALL_PODCAST_INDEX_API_KEY=YOUR_KEY_HERE
KILLALL_PODCAST_INDEX_API_SECRET=YOUR_SECRET_HERE
KILLALL_PODCAST_INDEX_API_URL=https://api.podcastindex.org/api/1.0
KILLALL_PODCAST_INDEX_TIMEOUT=30s
KILLALL_PODCAST_INDEX_MAX_RETRIES=3

# AI Configuration (OpenAI)
# Get your API key from https://platform.openai.com/api-keys
# WARNING: Don't use placeholder values in production!
KILLALL_AI_PROVIDER=openai
KILLALL_AI_OPENAI_API_KEY=YOUR_API_KEY
KILLALL_AI_OPENAI_MODEL=gpt-3.5-turbo
KILLALL_AI_OPENAI_MAX_TOKENS=2000
KILLALL_AI_OPENAI_TEMPERATURE=0.7
KILLALL_AI_REQUEST_TIMEOUT=60s

# Transcription Configuration
KILLALL_TRANSCRIPTION_SERVICE=whisper
KILLALL_TRANSCRIPTION_WHISPER_MODEL=whisper-1
KILLALL_TRANSCRIPTION_WHISPER_LANGUAGE=en
KILLALL_TRANSCRIPTION_MAX_FILE_SIZE=26214400
KILLALL_TRANSCRIPTION_ALLOWED_FORMATS=mp3,m4a,wav,ogg,flac
KILLALL_TRANSCRIPTION_OUTPUT_FORMAT=json
KILLALL_TRANSCRIPTION_ENABLE_TIMESTAMPS=true
KILLALL_TRANSCRIPTION_MONTHLY_QUOTA=100.0
# New: Prefer fetching existing transcripts from URLs
KILLALL_TRANSCRIPTION_PREFER_EXISTING=true
KILLALL_TRANSCRIPTION_FETCH_TIMEOUT=30s
KILLALL_TRANSCRIPTION_ALLOWED_TRANSCRIPT_FORMATS=vtt,srt,txt,json

# FFmpeg Configuration
KILLALL_FFMPEG_PATH=ffmpeg
KILLALL_FFMPEG_FFPROBE_PATH=ffprobe
KILLALL_FFMPEG_MAX_PROCESSES=5
KILLALL_FFMPEG_TIMEOUT=300s
KILLALL_FFMPEG_HARDWARE_ACCEL=auto
KILLALL_FFMPEG_OUTPUT_FORMAT=mp3
KILLALL_FFMPEG_AUDIO_CODEC=libmp3lame
KILLALL_FFMPEG_AUDIO_BITRATE=128k
KILLALL_FFMPEG_AUDIO_SAMPLE_RATE=44100
KILLALL_FFMPEG_AUDIO_CHANNELS=2

# Cache Configuration
KILLALL_CACHE_ENABLED=true
KILLALL_CACHE_TYPE=memory
KILLALL_CACHE_MAX_SIZE_MB=100
KILLALL_CACHE_DEFAULT_TTL=30m
KILLALL_CACHE_CLEANUP_INTERVAL=1m

# Cache TTLs by endpoint (in minutes)
KILLALL_CACHE_TTL_SEARCH=15
KILLALL_CACHE_TTL_TRENDING=60
KILLALL_CACHE_TTL_PODCAST=120
KILLALL_CACHE_TTL_EPISODE=60
KILLALL_CACHE_TTL_REVIEWS=120
KILLALL_CACHE_TTL_CATEGORIES=240
KILLALL_CACHE_TTL_WAVEFORM=1440

# Redis Configuration (for future use)
KILLALL_CACHE_REDIS_ADDR=localhost:6379
KILLALL_CACHE_REDIS_PASSWORD=
KILLALL_CACHE_REDIS_DB=0
KILLALL_CACHE_REDIS_POOL_SIZE=10

# Storage Configuration
KILLALL_STORAGE_TYPE=local
KILLALL_STORAGE_LOCAL_PATH=./storage
KILLALL_STORAGE_TEMP_DIR=./tmp
KILLALL_STORAGE_MAX_FILE_SIZE=104857600
KILLALL_STORAGE_ALLOWED_EXTENSIONS=mp3,m4a,wav,ogg,flac,aac
KILLALL_STORAGE_S3_BUCKET=
KILLALL_STORAGE_S3_REGION=us-east-1
KILLALL_STORAGE_S3_ACCESS_KEY=
KILLALL_STORAGE_S3_SECRET_KEY=
KILLALL_STORAGE_S3_ENDPOINT=

# Security Configuration
KILLALL_SECURITY_CORS_ENABLED=true
KILLALL_SECURITY_CORS_ORIGINS=*
KILLALL_SECURITY_CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
KILLALL_SECURITY_CORS_HEADERS=Content-Type,Authorization
KILLALL_SECURITY_CORS_CREDENTIALS=false
KILLALL_SECURITY_CORS_MAX_AGE=86400
KILLALL_SECURITY_RATE_LIMIT_ENABLED=true
KILLALL_SECURITY_RATE_LIMIT_RPS=10
KILLALL_SECURITY_RATE_LIMIT_BURST=20
KILLALL_SECURITY_API_KEY_HEADER=X-API-Key
KILLALL_SECURITY_API_KEY_REQUIRED=false

# Authentication Configuration
# WARNING: Don't use placeholder values in production!

# Supabase Configuration
KILLALL_SUPABASE_URL=https://your-project.supabase.co
KILLALL_SUPABASE_ANON_KEY=YOUR_ANON_KEY_HERE
KILLALL_SUPABASE_JWKS_URL=https://your-project.supabase.co/auth/v1/.well-known/jwks.json

# Development Authentication (optional)
KILLALL_DEV_AUTH_ENABLED=false
KILLALL_DEV_AUTH_TOKEN=dev-token-super-secret-XYZ123-never-use-in-prod

# User Management (for scripts only)
# These are only needed for running the user provisioning scripts
SUPABASE_API_KEY=YOUR_SERVICE_ROLE_KEY_HERE
SUPABASE_ADMIN_USER=admin@example.com
SUPABASE_ADMIN_PASSWORD=your-admin-password

# Monitoring Configuration
KILLALL_MONITORING_ENABLED=false
KILLALL_MONITORING_METRICS_ENABLED=false
KILLALL_MONITORING_METRICS_PATH=/metrics
KILLALL_MONITORING_HEALTH_PATH=/health
KILLALL_MONITORING_PPROF_ENABLED=false
KILLALL_MONITORING_PPROF_PATH=/debug/pprof
KILLALL_MONITORING_TRACING_ENABLED=false
KILLALL_MONITORING_TRACING_SERVICE_NAME=podcast-api
KILLALL_MONITORING_TRACING_JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Logging Configuration
KILLALL_LOGGING_LEVEL=info
KILLALL_LOGGING_FORMAT=json
KILLALL_LOGGING_OUTPUT=stdout
KILLALL_LOGGING_FILE_PATH=./logs/app.log
KILLALL_LOGGING_FILE_MAX_SIZE=100
KILLALL_LOGGING_FILE_MAX_BACKUPS=7
KILLALL_LOGGING_FILE_MAX_AGE=30
KILLALL_LOGGING_ENABLE_CONSOLE=true
KILLALL_LOGGING_ENABLE_FILE=false

# Feature Flags
KILLALL_FEATURES_ENABLE_TRANSCRIPTION=true
KILLALL_FEATURES_ENABLE_WAVEFORM=true
KILLALL_FEATURES_ENABLE_CHAPTERS=true
KILLALL_FEATURES_ENABLE_TAGGING=true
KILLALL_FEATURES_ENABLE_SEARCH=true
KILLALL_FEATURES_ENABLE_RECOMMENDATIONS=false
KILLALL_FEATURES_ENABLE_SOCIAL=false
KILLALL_FEATURES_ENABLE_ANALYTICS=false
KILLALL_FEATURES_MAINTENANCE_MODE=false