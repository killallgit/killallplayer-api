{
    "schemes": [
        "http",
        "https"
    ],
    "swagger": "2.0",
    "info": {
        "description": "A REST API for podcast discovery, episode management, and audio streaming.\nThis API provides endpoints for searching podcasts, managing episodes, streaming audio,\nand generating waveforms for audio visualization.",
        "title": "Podcast Player API",
        "contact": {
            "name": "Podcast Player API Support",
            "url": "https://github.com/killallgit/killallplayer-api",
            "email": "support@example.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/",
    "paths": {
        "/": {
            "get": {
                "description": "Get version and basic information about the Podcast Player API",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "version"
                ],
                "summary": "Get API version",
                "responses": {
                    "200": {
                        "description": "API version information",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "description": {
                                    "type": "string"
                                },
                                "name": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                },
                                "version": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/episodes": {
            "get": {
                "description": "Get recent episodes across all podcasts with optional limit parameter",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "episodes"
                ],
                "summary": "Get all episodes",
                "parameters": [
                    {
                        "maximum": 1000,
                        "minimum": 1,
                        "type": "integer",
                        "default": 50,
                        "description": "Number of episodes to return (1-1000)",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of episodes",
                        "schema": {
                            "$ref": "#/definitions/episodes.PodcastIndexResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/episodes.PodcastIndexErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/episodes/{id}": {
            "get": {
                "description": "Retrieve a single episode by its Podcast Index ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "episodes"
                ],
                "summary": "Get episode by ID",
                "parameters": [
                    {
                        "minimum": 1,
                        "type": "integer",
                        "example": 123456789,
                        "description": "Episode Podcast Index ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Episode details",
                        "schema": {
                            "$ref": "#/definitions/episodes.EpisodeByGUIDResponse"
                        }
                    },
                    "400": {
                        "description": "Bad request - invalid ID",
                        "schema": {
                            "$ref": "#/definitions/episodes.PodcastIndexErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Episode not found",
                        "schema": {
                            "$ref": "#/definitions/episodes.PodcastIndexErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/episodes.PodcastIndexErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/episodes/{id}/playback": {
            "put": {
                "description": "Update the playback position and played status for an episode",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "episodes"
                ],
                "summary": "Update playback status",
                "parameters": [
                    {
                        "minimum": 1,
                        "type": "integer",
                        "example": 123456789,
                        "description": "Episode Podcast Index ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Playback status update",
                        "name": "playback",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/episodes.PlaybackUpdateRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Update successful",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request - invalid parameters",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/search": {
            "post": {
                "description": "Search for podcasts by query string with optional result limit",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "search"
                ],
                "summary": "Search for podcasts",
                "parameters": [
                    {
                        "description": "Search parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.SearchRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of matching podcasts",
                        "schema": {
                            "$ref": "#/definitions/models.SearchResponse"
                        }
                    },
                    "400": {
                        "description": "Bad request - invalid parameters",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "details": {
                                    "type": "string"
                                },
                                "message": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "details": {
                                    "type": "string"
                                },
                                "message": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "504": {
                        "description": "Gateway timeout - search request timed out",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/stream/direct": {
            "get": {
                "description": "Stream audio directly from a provided URL with HTTP range request support (seeking). No database lookup required.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "audio/mpeg"
                ],
                "tags": [
                    "streaming"
                ],
                "summary": "Stream audio from direct URL",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"https://example.com/audio/episode.mp3\"",
                        "description": "Direct audio URL to stream",
                        "name": "url",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"bytes=0-1023\"",
                        "description": "HTTP Range header for partial content requests",
                        "name": "Range",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Full audio content"
                    },
                    "206": {
                        "description": "Partial audio content (range request)"
                    },
                    "400": {
                        "description": "Bad request - missing or invalid URL",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - access to private networks not allowed",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Bad gateway - audio source error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            },
            "options": {
                "description": "Handle CORS preflight requests for streaming endpoints",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "streaming"
                ],
                "summary": "Handle CORS preflight",
                "responses": {
                    "204": {
                        "description": "No content - CORS preflight successful"
                    }
                }
            },
            "head": {
                "description": "Stream audio directly from a provided URL with HTTP range request support (seeking). No database lookup required.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "audio/mpeg"
                ],
                "tags": [
                    "streaming"
                ],
                "summary": "Stream audio from direct URL",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"https://example.com/audio/episode.mp3\"",
                        "description": "Direct audio URL to stream",
                        "name": "url",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"bytes=0-1023\"",
                        "description": "HTTP Range header for partial content requests",
                        "name": "Range",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Full audio content"
                    },
                    "206": {
                        "description": "Partial audio content (range request)"
                    },
                    "400": {
                        "description": "Bad request - missing or invalid URL",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - access to private networks not allowed",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Bad gateway - audio source error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/stream/{id}": {
            "get": {
                "description": "Stream audio for an episode by its Podcast Index ID with HTTP range request support (seeking)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "audio/mpeg"
                ],
                "tags": [
                    "streaming"
                ],
                "summary": "Stream episode audio",
                "parameters": [
                    {
                        "minimum": 1,
                        "type": "integer",
                        "example": 123456789,
                        "description": "Episode Podcast Index ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"bytes=0-1023\"",
                        "description": "HTTP Range header for partial content requests",
                        "name": "Range",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Full audio content"
                    },
                    "206": {
                        "description": "Partial audio content (range request)"
                    },
                    "400": {
                        "description": "Bad request - invalid episode ID",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Episode not found or no audio available",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Bad gateway - audio source error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            },
            "options": {
                "description": "Handle CORS preflight requests for streaming endpoints",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "streaming"
                ],
                "summary": "Handle CORS preflight",
                "responses": {
                    "204": {
                        "description": "No content - CORS preflight successful"
                    }
                }
            },
            "head": {
                "description": "Stream audio for an episode by its Podcast Index ID with HTTP range request support (seeking)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "audio/mpeg"
                ],
                "tags": [
                    "streaming"
                ],
                "summary": "Stream episode audio",
                "parameters": [
                    {
                        "minimum": 1,
                        "type": "integer",
                        "example": 123456789,
                        "description": "Episode Podcast Index ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"bytes=0-1023\"",
                        "description": "HTTP Range header for partial content requests",
                        "name": "Range",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Full audio content"
                    },
                    "206": {
                        "description": "Partial audio content (range request)"
                    },
                    "400": {
                        "description": "Bad request - invalid episode ID",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Episode not found or no audio available",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Bad gateway - audio source error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/trending": {
            "get": {
                "description": "Get a list of trending podcasts from the Podcast Index API",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "trending"
                ],
                "summary": "Get trending podcasts",
                "parameters": [
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "default": 20,
                        "description": "Number of podcasts to return (1-100)",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of trending podcasts",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "count": {
                                    "type": "integer"
                                },
                                "description": {
                                    "type": "string"
                                },
                                "podcasts": {
                                    "type": "array"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "description": {
                                    "type": "string"
                                },
                                "status": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/health": {
            "get": {
                "description": "Get the health status of the API server and database connection",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "health"
                ],
                "summary": "Health check",
                "responses": {
                    "200": {
                        "description": "Server health status",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "database": {
                                    "type": "object"
                                },
                                "status": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "episodes.EpisodeByGUIDResponse": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "episode": {
                    "$ref": "#/definitions/episodes.PodcastIndexEpisode"
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "episodes.Person": {
            "type": "object",
            "properties": {
                "group": {
                    "type": "string"
                },
                "href": {
                    "type": "string"
                },
                "img": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "role": {
                    "type": "string"
                }
            }
        },
        "episodes.PlaybackUpdateRequest": {
            "type": "object",
            "properties": {
                "played": {
                    "description": "Whether the episode has been played",
                    "type": "boolean",
                    "example": false
                },
                "position": {
                    "description": "Playback position in seconds",
                    "type": "integer",
                    "example": 1800
                }
            }
        },
        "episodes.PodcastIndexEpisode": {
            "type": "object",
            "properties": {
                "chaptersUrl": {
                    "type": "string",
                    "example": "https://example.com/chapters/episode42.json"
                },
                "dateCrawled": {
                    "type": "integer",
                    "example": 1704067200
                },
                "datePublished": {
                    "type": "integer",
                    "example": 1704063600
                },
                "datePublishedPretty": {
                    "type": "string",
                    "example": "2024-01-01 00:00:00"
                },
                "description": {
                    "type": "string",
                    "example": "In this episode, we explore the meaning of life, the universe, and everything."
                },
                "duration": {
                    "type": "integer",
                    "example": 3600
                },
                "enclosureLength": {
                    "type": "integer",
                    "example": 52428800
                },
                "enclosureType": {
                    "type": "string",
                    "example": "audio/mpeg"
                },
                "enclosureUrl": {
                    "type": "string",
                    "example": "https://example.com/audio/episode42.mp3"
                },
                "episode": {
                    "type": "integer",
                    "example": 42
                },
                "episodeType": {
                    "type": "string",
                    "example": "full"
                },
                "explicit": {
                    "type": "integer",
                    "example": 0
                },
                "feedDead": {
                    "type": "integer",
                    "example": 0
                },
                "feedDuplicateOf": {
                    "type": "integer"
                },
                "feedId": {
                    "type": "integer",
                    "example": 123456
                },
                "feedImage": {
                    "type": "string",
                    "example": "https://example.com/podcast-cover.jpg"
                },
                "feedItunesId": {
                    "type": "integer",
                    "example": 987654321
                },
                "feedLanguage": {
                    "type": "string",
                    "example": "en"
                },
                "feedTitle": {
                    "type": "string",
                    "example": "The Tech Show"
                },
                "feedUrl": {
                    "type": "string",
                    "example": "https://example.com/rss.xml"
                },
                "guid": {
                    "type": "string",
                    "example": "episode-42-guid-string"
                },
                "id": {
                    "type": "integer",
                    "example": 123456789
                },
                "image": {
                    "type": "string",
                    "example": "https://example.com/episode42-cover.jpg"
                },
                "link": {
                    "type": "string",
                    "example": "https://example.com/episode/42"
                },
                "persons": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/episodes.Person"
                    }
                },
                "podcastGuid": {
                    "type": "string",
                    "example": "podcast-guid-string"
                },
                "season": {
                    "type": "integer",
                    "example": 2
                },
                "socialInteract": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/episodes.SocialInteraction"
                    }
                },
                "soundbite": {
                    "$ref": "#/definitions/episodes.Soundbite"
                },
                "soundbites": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/episodes.Soundbite"
                    }
                },
                "title": {
                    "type": "string",
                    "example": "Episode 42: The Answer to Everything"
                },
                "transcriptUrl": {
                    "type": "string",
                    "example": "https://example.com/transcripts/episode42.txt"
                },
                "transcripts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/episodes.Transcript"
                    }
                },
                "value": {
                    "$ref": "#/definitions/episodes.Value"
                }
            }
        },
        "episodes.PodcastIndexErrorResponse": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "status": {
                    "description": "\"false\"",
                    "type": "string"
                }
            }
        },
        "episodes.PodcastIndexResponse": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer",
                    "example": 10
                },
                "description": {
                    "type": "string",
                    "example": "Found 10 episodes"
                },
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/episodes.PodcastIndexEpisode"
                    }
                },
                "liveItems": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/episodes.PodcastIndexEpisode"
                    }
                },
                "query": {},
                "status": {
                    "description": "\"true\" or \"false\"",
                    "type": "string",
                    "example": "true"
                }
            }
        },
        "episodes.SocialInteraction": {
            "type": "object",
            "properties": {
                "accountId": {
                    "type": "string"
                },
                "accountUrl": {
                    "type": "string"
                },
                "platform": {
                    "type": "string"
                },
                "priority": {
                    "type": "integer"
                },
                "protocol": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                }
            }
        },
        "episodes.Soundbite": {
            "type": "object",
            "properties": {
                "duration": {
                    "type": "number"
                },
                "startTime": {
                    "type": "number"
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "episodes.Transcript": {
            "type": "object",
            "properties": {
                "language": {
                    "type": "string"
                },
                "rel": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                }
            }
        },
        "episodes.Value": {
            "type": "object",
            "properties": {
                "destinations": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/episodes.ValueDestination"
                    }
                },
                "model": {
                    "$ref": "#/definitions/episodes.ValueModel"
                }
            }
        },
        "episodes.ValueDestination": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "customKey": {
                    "type": "string"
                },
                "customValue": {
                    "type": "string"
                },
                "fee": {
                    "type": "boolean"
                },
                "name": {
                    "type": "string"
                },
                "split": {
                    "type": "integer"
                },
                "type": {
                    "type": "string"
                }
            }
        },
        "episodes.ValueModel": {
            "type": "object",
            "properties": {
                "method": {
                    "type": "string"
                },
                "suggested": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                }
            }
        },
        "models.PodcastSearchResult": {
            "type": "object",
            "properties": {
                "author": {
                    "type": "string",
                    "example": "John Smith"
                },
                "description": {
                    "type": "string",
                    "example": "A weekly show about technology and innovation"
                },
                "id": {
                    "type": "string",
                    "example": "123456"
                },
                "image": {
                    "type": "string",
                    "example": "https://example.com/podcast-image.jpg"
                },
                "title": {
                    "type": "string",
                    "example": "The Tech Show"
                },
                "url": {
                    "type": "string",
                    "example": "https://example.com/rss.xml"
                }
            }
        },
        "models.SearchRequest": {
            "type": "object",
            "required": [
                "query"
            ],
            "properties": {
                "limit": {
                    "type": "integer",
                    "maximum": 100,
                    "minimum": 1,
                    "example": 10
                },
                "query": {
                    "type": "string",
                    "maxLength": 200,
                    "minLength": 1,
                    "example": "technology podcasts"
                }
            }
        },
        "models.SearchResponse": {
            "type": "object",
            "properties": {
                "podcasts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/models.PodcastSearchResult"
                    }
                }
            }
        }
    },
    "tags": [
        {
            "description": "Health check endpoints",
            "name": "health"
        },
        {
            "description": "API version information",
            "name": "version"
        },
        {
            "description": "Podcast search functionality",
            "name": "search"
        },
        {
            "description": "Episode management and playback",
            "name": "episodes"
        },
        {
            "description": "Audio streaming with range request support",
            "name": "streaming"
        },
        {
            "description": "Trending podcast discovery",
            "name": "trending"
        },
        {
            "description": "Podcast management and synchronization",
            "name": "podcasts"
        },
        {
            "description": "Audio waveform generation and retrieval",
            "name": "waveform"
        },
        {
            "description": "Playback region and bookmark management",
            "name": "regions"
        }
    ]
}